<!DOCTYPE html>
<html>
<head>
    <title>PS4 Null Byte Check</title>
    <style>
        body { background-color: #050505; color: #00ff00; font-family: monospace; padding: 20px; text-align: center; }
        button { 
            font-size: 24px; padding: 20px; margin: 20px; cursor: pointer; 
            border: 2px solid #00ff00; background: #111; color: #fff; width: 80%; display: block; margin-left: auto; margin-right: auto;
        }
        .info { color: cyan; margin-bottom: 20px; }
        #log { margin-top: 20px; border: 1px solid #333; padding: 10px; color: yellow; }
    </style>
</head>
<body>

    <h1>Teste de Tipo de Cópia: 709.523</h1>
    <p class="info">Vamos tentar "matar" a cópia com um Byte Nulo.</p>

    <div id="log">Pronto.</div>

    <button onclick="sendClassic()">
        1. ENVIAR 'A' (Crash Esperado)<br>
        <small>Referência: 709.522 'A' + 1 'A'</small>
    </button>

    <button onclick="sendNull()">
        2. ENVIAR 'NULL' (%00)<br>
        <small>Teste: 709.522 'A' + %00</small>
    </button>

    <script>
        const SIZE_SAFE = 709522;

        function log(msg) {
            document.getElementById('log').innerText = msg;
        }

        function sendClassic() {
            log("Enviando Payload Clássico (Crash)...");
            setTimeout(() => {
                // Termina com "A" -> Total 709523
                const payload = "/" + "A".repeat(SIZE_SAFE) + "A"; 
                history.pushState({}, "crash", payload);
            }, 500);
        }

        function sendNull() {
            log("Enviando Payload NULL Terminated...");
            setTimeout(() => {
                // Tenta injetar um URL Encoded Null Byte
                // O navegador pode decodificar isso antes de passar pro Kernel
                // Se o Kernel ler 0x00, ele para?
                const payload = "/" + "A".repeat(SIZE_SAFE) + "\u0000"; 
                history.pushState({}, "null_test", payload);
                
                log("Payload enviado. Se não travou em 10s, é strcpy!");
            }, 500);
        }
    </script>
</body>
</html>
