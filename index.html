<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Kernel Panic</title>    
</head>
<body>
    <h1>Red Zone Bypass</h1>
    <div class="section">
         <button class="kernel" onclick="runRedZoneBypass()">Stack Red Zone Bypass (Thr Init)</button>
            </div>

    <div id="log"></div>
    <div id="scroll-dummy"><div style="height:5000px"></div></div>

    <script>
        function log(msg) { 
            const el = document.getElementById('log');
            el.innerHTML += `<div>[${new Date().toLocaleTimeString()}] ${msg}</div>`;
        }

        // Alvo: "Cannot allocate red zone for initial thread"
        // Cria threads que usam muita stack imediatamente, competindo com a inicialização.
        function runRedZoneBypass() {
            log("[KERNEL] Bypass Red Zone...");
            
            const workerCode = `
                function deep(n) {
                    const v = new Float64Array(128); // Usa stack
                    if (n > 0) deep(n-1);
                }
                // Assim que nasce, consome stack
                deep(10); 
                postMessage("Done");
            `;
            const url = URL.createObjectURL(new Blob([workerCode], {type:"text/javascript"}));
            
            // Spawn flood
            let count = 0;
            const interval = setInterval(() => {
                for(let i=0; i<20; i++) {
                    new Worker(url).onmessage = () => {};
                }
                count += 20;
                if(count > 300) {
                    clearInterval(interval);
                    log("Red Zone Stress finalizado.");
                }
            }, 10);
        }

      </script>
</body>
</html>







