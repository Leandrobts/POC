<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Teste libpng V3</title>
    <style>
        body { background: #1a1a1a; color: #fff; text-align: center; font-family: sans-serif; padding-top: 50px; }
        button { background: #d32f2f; color: white; border: none; padding: 20px 40px; font-size: 24px; cursor: pointer; border-radius: 8px; }
        #log { margin-top: 20px; font-size: 18px; color: yellow; }
        #imagemAlvo { display: none; width: 200px; height: 200px; margin: 20px auto; border: 2px solid red; }
    </style>
</head>
<body>

    <h1>Teste de Vulnerabilidade PNG</h1>
    <p>Arquivo alvo: <b>poc.png</b></p>
    <p>M√©todo: Palette Index OOB Read</p>

    <button onclick="atacar()">üí£ EXECUTAR TESTE üí£</button>
    
    <div id="log">Aguardando...</div>
    <img id="imagemAlvo" alt="Alvo">

    <script>
        function atacar() {
            var logDiv = document.getElementById('log');
            var img = document.getElementById('imagemAlvo');

            logDiv.innerHTML = "Carregando poc.png...<br>Monitore o console por 10 segundos.";
            
            // Adiciona timestamp para evitar cache do navegador
            img.src = "poc.png?t=" + new Date().getTime();
            img.style.display = "block";

            img.onload = function() {
                // Se cair aqui, a imagem renderizou "corretamente" (o bug falhou)
                // Isso acontece se o navegador substituir cores inv√°lidas por preto automaticamente.
                logDiv.innerHTML = "‚ùå Sem Crash: O navegador sanitizou os √≠ndices inv√°lidos.";
                logDiv.style.color = "#0f0";
            };

            img.onerror = function() {
                // Se cair aqui, o formato foi rejeitado, mas sem crashar.
                logDiv.innerHTML = "‚ö†Ô∏è Erro de Formato: O navegador rejeitou o arquivo.";
                logDiv.style.color = "orange";
            };
        }
    </script>
</body>
</html>
