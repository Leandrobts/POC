<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>PS4 419 Edge Runner</title>
    
</head>
<body>

    <h1>THE 419 EDGE RUNNER</h1>
    <div id="status">Pronto para encher até a borda...</div>
    <div id="counter">0</div>
    <button onclick="startFilling()">ENCHER ATÉ 415</button>
    <button onclick="startRace()" id="btnRace" style="display:none; background:#ff0; color:#000;">INICIAR RACE NO SLOT 419</button>

    <script>
        const SAFETY_LIMIT = 415; // Paramos um pouco antes do crash (419)
        let workers = [];
        const blob = new Blob(["setInterval(()=>{}, 10000)"], {type:'text/javascript'});
        const url = URL.createObjectURL(blob);

        // Worker corredor (Nasce e morre rápido)
        const runnerBlob = new Blob(["self.close()"], {type:'text/javascript'});
        const runnerUrl = URL.createObjectURL(runnerBlob);

        function updateUI() {
            document.getElementById('counter').innerText = workers.length;
        }

        function startFilling() {
            document.getElementById('status').innerText = "Enchendo tabela...";
            let i = setInterval(() => {
                if (workers.length < SAFETY_LIMIT) {
                    workers.push(new Worker(url));
                    updateUI();
                } else {
                    clearInterval(i);
                    document.getElementById('status').innerText = "Limite Seguro Atingido. Memória Tensa.";
                    document.getElementById('btnRace').style.display = "inline-block";
                }
            }, 5);
        }

        function startRace() {
            document.getElementById('status').innerText = "RACE CONDITION ATIVA (Slot 416-419)...";
            document.getElementById('status').style.color = "#f00";
            
            // Lança múltiplos corredores que tentam ocupar e liberar os últimos slots simultaneamente
            // O objetivo é confundir o Kernel sobre qual slot está livre
            setInterval(() => {
                // Tenta criar (Use)
                const w = new Worker(runnerUrl);
                
                // Tenta matar imediatamente (Free)
                // Usamos setTimeout(0) para forçar desync
                w.terminate(); 
                
                // Criação secundária para pressão
                try { new Worker(runnerUrl).terminate(); } catch(e){}

            }, 0); // Velocidade máxima
        }
    </script>
</body>
</html>
