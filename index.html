<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>PS4 WebKit Research - 50 Vetores</title>
   
</head>
<body>
    <div id="log">Aguardando comando...</div>
    <div id="container" style="display:none"></div>

    <script>
        const log = (m) => document.getElementById('log').innerText = m;
        const container = document.getElementById('container');

        const tests = {
            // DOM & Nodes (1-10)
            t1: () => { let i = document.createElement('iframe'); document.body.appendChild(i); document.adoptNode(i); i.remove(); },
            t2: () => { let d = document.createElement('div'); d.attachShadow({mode:'open'}); d.shadowRoot.innerHTML = '<slot></slot>'; },
            t3: () => { let r = document.createRange(); r.selectNode(document.body); r.deleteContents(); },
            t4: () => { let s = document.getSelection(); s.selectAllChildren(document.body); s.collapseToEnd(); },
            t5: () => { container.innerHTML = '<a><b><c></c></b></a>'; container.querySelector('c').outerHTML = '<div></div>'; },
            t6: () => { let o = new MutationObserver(()=>{}); o.observe(document.body, {attributes:true}); document.body.setAttribute('a','b'); },
            t7: () => { let e = new CustomEvent('a'); window.dispatchEvent(e); },
            t8: () => { let n = document.createNodeIterator(document.body); n.nextNode(); n.detach(); },
            t9: () => { let t = document.createTextNode('a'); t.splitText(0); },
            t10: () => { document.implementation.createDocument(null, 'test').adoptNode(document.body); },

            // CSS & Layout (11-20)
            t11: () => { container.style.columnCount = 1000; container.style.columnGap = '1px'; },
            t12: () => { container.style.maskImage = 'linear-gradient(red, blue)'; },
            t13: () => { container.style.clipPath = 'circle(50%)'; },
            t14: () => { container.style.backdropFilter = 'blur(10px)'; },
            t15: () => { container.style.transform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)'; },
            t16: () => { container.style.perspective = '10px'; },
            t17: () => { container.style.willChange = 'transform, opacity, contents'; },
            t18: () => { container.style.shapeOutside = 'circle(50%)'; },
            t19: () => { container.style.filter = 'url(#invalid)'; },
            t20: () => { container.style.gridTemplateAreas = '"a a" "b b"'; },

            // SVG & Graphics (21-30)
            t21: () => { container.innerHTML = '<svg><filter id="f"><feColorMatrix values="NaN"/></filter></svg>'; },
            t22: () => { container.innerHTML = '<svg><path d="M 0 0 L 1e9 1e9"/></svg>'; },
            t23: () => { container.innerHTML = '<svg><circle><animateTransform attributeName="transform" type="scale" from="1" to="2"/></circle></svg>'; },
            t24: () => { container.innerHTML = '<svg><use href="#nonexistent"/></svg>'; },
            t25: () => { container.innerHTML = '<svg><foreignObject><div></div></foreignObject></svg>'; },
            t26: () => { container.innerHTML = '<svg><linearGradient><stop offset="0" stop-color="red"/></linearGradient></svg>'; },
            t27: () => { container.innerHTML = '<svg><feGaussianBlur stdDeviation="10"/></svg>'; },
            t28: () => { container.innerHTML = '<svg><pattern><rect/></pattern></svg>'; },
            t29: () => { container.innerHTML = '<svg><marker id="m"><path/></marker></svg>'; },
            t30: () => { container.innerHTML = '<svg><feComposite in="SourceGraphic" in2="SourceGraphic" operator="arithmetic" k1="1"/></svg>'; },

            // JS Engine & Built-ins (31-40)
            t31: () => { let p = new Proxy([], { get: (t, k) => { if(k==='length') return 0xffffffff; return t[k]; } }); Array.prototype.concat.call(p); },
            t32: () => { let a = [1.1]; Object.defineProperty(a, '0', {get: () => { a.length = 0; return 2.2; }}); a.sort(); },
            t33: () => { try { (function f() { f(); })(); } catch(e) {} },
            t34: () => { new RegExp('(?=a)'.repeat(10000)); },
            t35: () => { JSON.stringify(window); },
            t36: () => { let b = new Uint8Array(10); Object.defineProperty(b, 'length', {value: 1000}); },
            t37: () => { Array.from({length: 0xffffffff}, () => 1); },
            t38: () => { "a".repeat(0x3fffffff); },
            t39: () => { new Intl.DateTimeFormat('en-US', {calendar: 'buddhist'}).format(new Date()); },
            t40: () => { Promise.all(new Array(10000).fill(Promise.resolve())); },

            // APIs & Streams (41-50)
            t41: () => { let {readable, writable} = new TransformStream(); readable.getReader().cancel(); },
            t42: () => { let b = new Blob([]); URL.createObjectURL(b); URL.revokeObjectURL('invalid'); },
            t43: () => { let c = new MessageChannel(); c.port1.postMessage('a', [c.port1]); },
            t44: () => { performance.mark('a'); performance.measure('b', 'a'); },
            t45: () => { let a = new AudioContext(); a.createBuffer(1, 1, 22050); a.close(); },
            t46: () => { indexedDB.open('test', 1).onupgradeneeded = (e) => e.target.result.createObjectStore('s'); },
            t47: () => { new AbortController().abort(); },
            t48: () => { let f = new FontFace('a', 'url(b)'); f.load().catch(()=>{}); },
            t49: () => { navigator.serviceWorker.register('invalid.js').catch(()=>{}); },
            t50: () => { requestAnimationFrame(() => { container.innerHTML = ''; }); }, 

            // DOM Reentrancy & Observers (51-60)
            t51: () => { let ro = new ResizeObserver(() => ro.disconnect()); ro.observe(document.body); },
            t52: () => { document.body.addEventListener('click', () => {}, {once: true}); document.body.click(); },
            t53: () => { let s = document.createElement('style'); s.textContent = ':empty { display: block; }'; document.head.appendChild(s); },
            t54: () => { let tw = document.createTreeWalker(document.body, NodeFilter.SHOW_ELEMENT); tw.nextNode(); tw.currentNode = null; },
            t55: () => { let d = new DocumentFragment(); d.appendChild(document.createElement('div')); d.firstChild.remove(); },
            t56: () => { let mo = new MutationObserver(() => { target.id = "a"; }); mo.observe(target, {attributes:true}); target.id = "b"; },
            t57: () => { let e = document.createEvent('MouseEvent'); e.initEvent('click', true, true); target.dispatchEvent(e); },
            t58: () => { target.innerHTML = '<details open><summary>A</summary></details>'; target.firstChild.open = false; },
            t59: () => { let i = document.createElement('input'); i.type = 'file'; i.click(); /* Interação manual pode ser necessária */ },
            t60: () => { document.createRange().setStartBefore(document.body); },

            // JS Object Transitions & Prototypes (61-70)
            t61: () => { let a = {x:1}; Object.preventExtensions(a); a.y = 2; },
            t62: () => { let a = [1, 2, 3]; Object.seal(a); a.shift(); },
            t63: () => { function F(){} F.prototype = null; new F(); },
            t64: () => { let p = Proxy.revocable({}, {}); p.revoke(); p.proxy.a = 1; },
            t65: () => { let a = new Float64Array(8); Object.defineProperty(a, '0', {get: () => 1}); },
            t66: () => { let s = new Set(); s.add(s); s.delete(s); },
            t67: () => { let m = new Map(); m.set(undefined, 1); m.get(undefined); },
            t68: () => { class C extends Array { constructor() { super(10); } } new C(); },
            t69: () => { let sym = Symbol('a'); let o = {[sym]: 1}; Object.getOwnPropertySymbols(o); },
            t70: () => { Object.setPrototypeOf(Array.prototype, null); },

            // CSS & Rendering Edge Cases (71-80)
            t71: () => { target.style.writingMode = 'vertical-rl'; target.style.textCombineUpright = 'all'; },
            t72: () => { target.style.fontVariantCaps = 'small-caps'; target.innerHTML = 'abc'; },
            t73: () => { target.style.grid = 'repeat(auto-fill, minmax(10px, 1fr)) / 1fr'; },
            t74: () => { target.style.shapeOutside = 'inset(10% round 10% 40% 10% 40%)'; },
            t75: () => { target.style.clipPath = 'polygon(0% 0%, 100% 0%, 50% 100%)'; },
            t76: () => { target.style.mixBlendMode = 'difference'; },
            t77: () => { target.style.hyphens = 'auto'; target.lang = 'en'; },
            t78: () => { target.style.offsetPath = 'path("M 0 0 L 100 100")'; },
            t79: () => { target.style.paintOrder = 'markers stroke fill'; },
            t80: () => { target.style.outline = '5px auto red'; },

            // TypedArrays & DataView (81-90)
            t81: () => { let b = new ArrayBuffer(16); let d = new DataView(b); d.setUint32(0, 0x12345678, true); },
            t82: () => { let b = new ArrayBuffer(8); let f = new Float64Array(b); f[0] = NaN; },
            t83: () => { let a = new Uint8ClampedArray(4); a[0] = 300; },
            t84: () => { let b = new ArrayBuffer(1024); b.slice(0, 512); },
            t85: () => { let a = new BigInt64Array(2); a[0] = 1n; },
            t86: () => { let b = new ArrayBuffer(8); new Int32Array(b, 4, 1); },
            t87: () => { let b = new ArrayBuffer(8); let a = new Int8Array(b); a.set([1,2], 7); },
            t88: () => { let d = new DataView(new ArrayBuffer(8)); d.getFloat32(0, true); },
            t89: () => { let a = new Uint32Array(2); a.fill(0xffffffff); },
            t90: () => { let a = new Int16Array(10); a.copyWithin(0, 5); },

            // Web APIs & Misc (91-100)
            t91: () => { let bc = new BroadcastChannel('a'); bc.postMessage('b'); bc.close(); },
            t92: () => { let c = new CacheStorage(); c.keys(); },
            t93: () => { navigator.geolocation.getCurrentPosition(()=>{}, ()=>{}); },
            t94: () => { let v = document.createElement('video'); v.src = 'data:video/mp4,0'; v.load(); },
            t95: () => { let a = new AudioContext(); let p = a.createPanner(); p.setPosition(0,0,0); },
            t96: () => { let r = new ReadableStream({start(c){c.enqueue('a');}}); r.getReader().read(); },
            t97: () => { let w = new WritableStream(); let wr = w.getWriter(); wr.write('a'); wr.releaseLock(); },
            t98: () => { history.pushState({a:1}, '', '#test'); history.back(); },
            t99: () => { let u = new URL('http://a'); u.searchParams.append('b', 'c'); },
            t100: () => { let p = new Path2D(); p.addPath(new Path2D()); },

            t101: () => { new Intl.NumberFormat('ar-EG', {style:'currency', currency:'EGP'}).format(123); },
            t102: () => { new Intl.PluralRules('en-US').select(0); },
            t103: () => { 'a'.normalize('NFKD'); },
            t104: () => { new Intl.RelativeTimeFormat('pt-BR').format(-1, 'day'); },
            t105: () => { new Intl.ListFormat('en-GB').format(['a', 'b']); },
            t106: () => { '𠮷'.codePointAt(0); },
            t107: () => { String.fromCodePoint(0x1F600); },
            t108: () => { new TextEncoder().encode('abc'); },
            t109: () => { new TextDecoder('utf-16').decode(new Uint8Array([0xff, 0xfe, 0x41, 0x00])); },
            t110: () => { new Intl.Segmenter('zh', {granularity: 'word'}).segment('测试'); },

            // WebAudio & Media Lifecycle (111-120)
            t111: () => { let a = new AudioContext(); let g = a.createGain(); g.gain.setValueAtTime(0, a.currentTime); a.close(); },
            t112: () => { let a = new AudioContext(); let s = a.createBufferSource(); s.buffer = a.createBuffer(1, 1, 22050); s.start(); },
            t113: () => { let v = document.createElement('video'); v.captureStream(); },
            t114: () => { let a = new AudioContext(); a.suspend(); a.resume(); },
            t115: () => { let a = new AudioContext(); let d = a.createDelay(1.0); d.delayTime.value = 0.5; },
            t116: () => { let a = new AudioContext(); let b = a.createBiquadFilter(); b.type = 'lowpass'; },
            t117: () => { let a = new AudioContext(); let c = a.createConvolver(); c.normalize = true; },
            t118: () => { let a = new AudioContext(); let p = a.createPeriodicWave(new Float32Array([0,1]), new Float32Array([0,0])); },
            t119: () => { let a = new AudioContext(); let n = a.createAnalyser(); n.getByteTimeDomainData(new Uint8Array(10)); },
            t120: () => { let a = new AudioContext(); let s = a.createScriptProcessor(4096, 1, 1); s.onaudioprocess = () => {}; },

            // Advanced DOM & Shadow DOM (121-130)
            t121: () => { scratch.innerHTML = '<template id="t"><div></div></template>'; scratch.firstChild.content.cloneNode(true); },
            t122: () => { let d = document.createElement('div'); d.attachShadow({mode:'closed'}); },
            t123: () => { let s = document.createElement('slot'); s.assignedNodes(); },
            t124: () => { document.createNodeIterator(document, NodeFilter.SHOW_COMMENT).nextNode(); },
            t125: () => { document.createRange().compareBoundaryPoints(Range.START_TO_END, document.createRange()); },
            t126: () => { let i = document.createElement('img'); i.srcset = 'a.jpg 1x, b.jpg 2x'; },
            t127: () => { let f = document.createElement('form'); f.requestSubmit(); },
            t128: () => { let i = document.createElement('input'); i.setSelectionRange(0, 10); },
            t129: () => { let d = document.createElement('dialog'); d.showModal(); d.close(); },
            t130: () => { document.styleSheets[0].insertRule('body { color: red; }', 0); },

            // CSS Variables & Animations (131-140)
            t131: () => { scratch.style.setProperty('--a', 'red'); scratch.style.getPropertyValue('--a'); },
            t132: () => { scratch.animate([{opacity: 0}, {opacity: 1}], 100); },
            t133: () => { scratch.getAnimations(); },
            t134: () => { scratch.style.transition = 'opacity 1s'; scratch.style.opacity = '0.5'; },
            t135: () => { scratch.style.content = 'counter(a)'; },
            t136: () => { scratch.style.clipPath = 'inset(10% 20% 30% 40%)'; },
            t137: () => { scratch.style.imageRendering = 'pixelated'; },
            t138: () => { scratch.style.scrollBehavior = 'smooth'; window.scrollTo(0, 1); },
            t139: () => { scratch.style.userSelect = 'none'; },
            t140: () => { scratch.style.touchAction = 'manipulation'; },

            // Streams, Blobs & Logic (141-150)
            t141: () => { new ReadableStream().getReader().closed.catch(()=>{}); },
            t142: () => { let b = new Blob(['a'], {type: 'text/plain'}); b.arrayBuffer(); },
            t143: () => { let b = new Blob(['a']); b.slice(0, 1, 'text/html'); },
            t144: () => { let u = new URLSearchParams('a=1&b=2'); u.sort(); },
            t145: () => { let u = new URL('http://a'); u.password = '123'; },
            t146: () => { let f = new FormData(); f.append('a', new Blob([]), 'b.txt'); },
            t147: () => { let h = new Headers(); h.append('Set-Cookie', 'a=1'); },
            t148: () => { let r = new Request('http://a', {method: 'POST', body: 'a'}); r.clone(); },
            t149: () => { fetch('data:text/plain,a').then(r => r.blob()); },
            t150: () => { let c = new MessageChannel(); c.port1.onmessage = () => {}; c.port2.postMessage('a'); }


        };

        Object.keys(tests).forEach((key, index) => {
            let btn = document.createElement('button');
            btn.innerText = `${index + 1}. ${key}`;
            btn.onclick = () => { log(`Executando ${key}...`); tests[key](); };
            document.body.appendChild(btn);
        });
    </script>
</body>
</html>
