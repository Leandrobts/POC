<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Teste libpng V4</title>
    <style>
        body { background: #000; color: #fff; text-align: center; font-family: sans-serif; padding-top: 50px; }
        button { background: #ffca28; color: #000; border: none; padding: 20px 40px; font-size: 24px; cursor: pointer; border-radius: 8px; font-weight: bold;}
        #log { margin-top: 20px; font-size: 18px; color: #ffca28; }
        #imagemAlvo { display: none; margin: 20px auto; border: 2px solid white; }
    </style>
</head>
<body>

    <h1>Teste V4: CVE-2025-65018</h1>
    <p>Alvo: 16-bit Interlaced PNG -> 8-bit Output Overflow</p>

    <button onclick="atacar()">☣️ DETONAR ☣️</button>
    
    <div id="log">Aguardando...</div>
    <img id="imagemAlvo" alt="Alvo">

    <script>
        function atacar() {
            var logDiv = document.getElementById('log');
            var img = document.getElementById('imagemAlvo');

            logDiv.innerHTML = "Carregando poc.png...<br>Se o console travar, é RCE Potential.";
            
            // Cache busting
            img.src = "poc.png?t=" + new Date().getTime();
            img.style.display = "block";

            img.onload = function() {
                // Se carregar, o navegador lidou bem com o downsampling 16->8 bit
                logDiv.innerHTML = "❌ Sem Crash: O navegador processou o entrelaçamento corretamente.";
                logDiv.style.color = "#0f0";
            };

            img.onerror = function() {
                // Erro de decodificação
                logDiv.innerHTML = "⚠️ Erro de Imagem: O formato foi rejeitado.";
                logDiv.style.color = "orange";
            };
        }
    </script>
</body>
</html>
