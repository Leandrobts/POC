<!DOCTYPE html>
<html>
<head>
    <title>PS4 Layout/CSS Smasher</title>
    <style>
        body { background: #000; color: #fff; overflow: hidden; }
        #hud { 
            position: fixed; top: 0; left: 0; width: 100%; 
            background: rgba(50, 0, 0, 0.9); border-bottom: 2px solid red; 
            padding: 10px; z-index: 9999; font-family: monospace; font-size: 20px;
        }
        
        /* O VENENO VISUAL */
        /* Força cálculos recursivos e pesados */
        .toxic {
            position: absolute;
            /* calc() aninhado pode causar estouro de pilha no parser CSS */
            width: calc(100% - calc(50px + calc(20% / 5))); 
            height: 50px;
            background: red;
            /* Matrizes 3D complexas */
            transform: matrix3d(
                1, 0, 0, 0, 
                0, 1, 0, 0, 
                0, 0, 1, 0, 
                0.0001, 0.0001, 0, 1
            );
            will-change: transform;
            border-radius: 50%;
            box-shadow: 0 0 10px #f00;
            opacity: 0.8;
        }
        
        /* Seletores aninhados extremos */
        div > div > div > div > div { border: 1px solid blue; }
    </style>
</head>
<body>
    <div id="hud">
        LAYOUT SMASHER: <span id="count">0</span> Elementos
    </div>
    <div id="arena"></div>

    <script>
        const arena = document.getElementById('arena');
        const hud = document.getElementById('count');
        let count = 0;

        // Cria uma árvore DOM profunda e complexa
        function smashLayout() {
            arena.innerHTML = ""; // Limpa (Stress de Layout)
            
            let parent = arena;
            // Cria profundidade (Stack Overflow no Render Tree)
            for(let i=0; i<50; i++) {
                let div = document.createElement('div');
                div.className = 'toxic';
                
                // Valores aleatórios para impedir cache de layout
                div.style.top = (Math.random() * 1000) + "px";
                div.style.left = (Math.random() * 1000) + "px";
                div.style.zIndex = i;
                
                // Texto complexo (Unicode) para estressar o motor de fontes
                div.innerText = "﷽".repeat(10); 
                
                parent.appendChild(div);
                parent = div;
            }
            
            // Força o navegador a calcular o layout AGORA
            let forceReflow = arena.offsetHeight;
            
            count += 50;
            hud.innerText = count;
        }

        function loop() {
            smashLayout();
            
            // Roda o mais rápido que o frame permitir
            requestAnimationFrame(loop);
        }

        // Inicia após 1 segundo
        setTimeout(loop, 1000);
    </script>
</body>
</html>
