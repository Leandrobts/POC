<!DOCTYPE html>
<html>
<head>
    <title>PS4 Bit Flipper Test</title>
    <style>
        body { background-color: #111; color: #ddd; font-family: monospace; padding: 20px; text-align: center; }
        button { 
            font-size: 24px; padding: 15px; margin: 15px; cursor: pointer; 
            width: 80%; border: none; font-weight: bold; border-radius: 5px;
        }
        .btn-low { background-color: #27ae60; color: white; } /* Verde */
        .btn-med { background-color: #f39c12; color: black; } /* Laranja */
        .btn-high { background-color: #c0392b; color: white; } /* Vermelho */
        #log { margin-top: 20px; border: 1px solid #444; padding: 10px; color: #00ffcc; }
    </style>
</head>
<body>

    <h2>Diagnóstico do Byte 709.523</h2>
    <p>O original é 0x00. O que acontece se mudarmos só um pouquinho?</p>

    <div id="log">Escolha um teste...</div>

    <button class="btn-low" onclick="sendByte(0x01)">
        TESTAR BYTE 0x01 (Valor 1)<br>
        <small>Muda 00 -> 01</small>
    </button>

    <button class="btn-med" onclick="sendByte(0x04)">
        TESTAR BYTE 0x04 (Valor 4)<br>
        <small>Muda 00 -> 04 (Alinhamento 32-bit?)</small>
    </button>

    <button class="btn-high" onclick="sendByte(0x20)">
        TESTAR BYTE 0x20 (Espaço)<br>
        <small>Muda 00 -> 20</small>
    </button>

    <script>
        const SIZE_SAFE = 709522;

        function log(msg) {
            document.getElementById('log').innerText = msg;
        }

        function sendByte(val) {
            log("Testando valor: " + val + " (Hex: 0x" + val.toString(16) + ")...");
            
            setTimeout(() => {
                try {
                    // Padding seguro
                    let buffer = "A".repeat(SIZE_SAFE);
                    
                    // Adiciona o byte específico (convertendo numero para char code)
                    buffer += String.fromCharCode(val); 

                    // Dispara
                    history.pushState({}, "bit_test", "/" + buffer);
                    
                    log("SOBREVIVEU! O sistema aceita o valor " + val + " neste local.");
                    document.body.style.backgroundColor = "#003300"; // Fica verde se não travar

                } catch (e) {
                    log("Erro JS: " + e.message);
                }
            }, 500);
        }
    </script>
</body>
</html>
