<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WebKit Crash Suite 18</title>
<style>
body { font-family: monospace; }
button { margin:4px; }
#log { border:1px solid #888; height:260px; overflow:auto; white-space:pre; }
</style>
</head>
<body>

<h2>WebKit Memory Corruption – Tests 11–20</h2>

<button onclick="t18()">TEST 18</button>

<hr>
<div id="log"></div>

<script>
function log(m){
  const l=document.getElementById("log");
  l.textContent += `[${new Date().toLocaleTimeString()}] ${m}\n`;
  l.scrollTop=l.scrollHeight;
}


/* =========================================================
 * TEST 18 — History Flood + GC
 * Classe: State object lifetime
 * =======================================================*/
function t18(){
  log("TEST 18 iniciado");
  try{
    for(let i=0;i<3000;i++){ // BOUNDARY
      history.pushState({x:"A".repeat(10000)}, "", "#"+i);
    }
    for(let i=0;i<4000;i++) new ArrayBuffer(1024*512);
    history.back();
  }catch(e){ log(e); }
}


log("Crash Suite 11–20 carregada. Execute um teste por vez.");
</script>
</body>
</html>

